{% extends "common/base.html" %}
{% load crispy_forms_tags %}
{% load static %}
{% load common_tags %}
{% load humanize %}

{% block title %}
Center Summary
{% endblock %}


{% block content %}
<h2>{% settings_value 'CENTER_NAME' %} Scientific Impact</h2>
<hr>

{% if settings.PUBLICATION_ENABLE %}
<!-- Start  Publications -->
<div class="card mb-3 border-primary">
  <div class="card-header bg-primary text-white">
    <i class="fas fa-newspaper" aria-hidden="true"></i> User Entered Publications
  </div>
  <div class="card-body">
    <div id="chartPublications"></div>
    <strong>Total Publications:</strong> {{total_publications_count}}
  </div>
</div>
<!-- End Publications -->
{% endif %}

{% if settings.RESEARCH_OUTPUT_ENABLE %}
<!-- Start  Research Outputs -->
<div class="card mb-3 border-primary">
  <div class="card-header bg-primary text-white">
    <i class="far fa-newspaper" aria-hidden="true"></i> User Entered Research Outputs
  </div>
  <div class="card-body">
    <strong>Total Publications:</strong> {{total_research_outputs_count}}
  </div>
</div>
<!-- End Research Outputs -->
{% endif %}

{% if settings.GRANT_ENABLE %}
<!-- Start  Grants -->
<div class="card mb-3 border-primary">
  <div class="card-header bg-primary text-white">
    <i class="fas fa-trophy" aria-hidden="true"></i> User Grants Summary
  </div>
  <div class="card-body">
    <div id="chartGrants"></div>
    <hr>
    <strong> Grants Total:</strong> ${{grants_total}} <br>
    <strong> Grants Total PI Only:</strong> ${{grants_total_pi_only}} <br>
    <strong> Grants Total CoPI Only:</strong> ${{grants_total_copi_only}} <br>
    <strong> Grants Total Senior Personnel Only:</strong> ${{grants_total_sp_only}}
  </div>
</div>
<!-- End Grants -->
{% endif %}

<!-- Start Allocation by Field of Science -->
<div class="card mb-3 border-primary">
  <div class="card-header bg-primary text-white">
    <i class="fas fa-flask" aria-hidden="true"></i> Active Allocations and Users by Field of Science
  </div>
  <div id="allocation-by-fos" class="card-body">
    <div class="text-center">
      <button type="button" class="btn btn-primary"><i class="fas fa-sync fa-spin fa-fw" aria-hidden="true"></i> Getting Data <span
          class="sr-only">...</span></button>
    </div>
  </div>
</div>
<!-- End Allocation by Field of Science -->

<!-- Start Allocation Charts -->
<div class="card mb-3 border-primary">
  <div class="card-header bg-primary text-white">
    <i class="fas fa-trophy"></i> Resources and Allocations Summary
  </div>
  <div id="allocation-summary" class="card-body">
    <div class="text-center">
      <button type="button" class="btn btn-primary"><i class="fas fa-sync fa-spin fa-fw" aria-hidden="true"></i> Getting Data <span
          class="sr-only">...</span></button>
    </div>
  </div>
</div>
<!-- End Allocation Charts -->

{{ grants_agency_chart_data|json_script:"grants-agency-chart-data" }}
{{ publication_by_year_bar_chart_data|json_script:"publication-by-year-bar-chart-data" }}
{% endblock %}

{% block javascript %}
{{ block.super }}
{% include "common/bundle_snippet.html" with asset_name_ts="centerSummary.ts" asset_name_js="coldfront-center-summary.js" %}
{% endblock %}
