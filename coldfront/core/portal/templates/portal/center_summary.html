{% extends "common/base.html" %}
{% load crispy_forms_tags %}
{% load static %}
{% load common_tags %}
{% load humanize %}

{% block title %}
Center Summary
{% endblock %}


{% block content %}
<h2>{{ settings.CENTER_NAME }} Scientific Impact</h2>
<hr>

{% if settings.PUBLICATION_ENABLE %}
<!-- Start  Publications -->
<div class="card mb-3">
  <div class="card-header">
    <i class="fas fa-newspaper" aria-hidden="true"></i> User Entered Publications
  </div>
  <div class="card-body">
    <div class="chart-container" style="position: relative; width:90%">
        <canvas id="pubs-by-year-chart"></canvas>
    </div>
    <strong>Total Publications:</strong> <span id="pubs-total">0</span>
  </div>
</div>
<!-- End Publications -->
{% endif %}

{% if settings.RESEARCH_OUTPUT_ENABLE %}
<!-- Start  Research Outputs -->
<div class="card mb-3">
  <div class="card-header">
    <i class="far fa-newspaper" aria-hidden="true"></i> User Entered Research Outputs
  </div>
  <div class="card-body">
    <strong>Total:</strong> {{research_outputs_count}}
  </div>
</div>
<!-- End Research Outputs -->
{% endif %}

{% if settings.GRANT_ENABLE %}
<!-- Start  Grants -->
<div class="card mb-3">
  <div class="card-header">
    <i class="fas fa-trophy" aria-hidden="true"></i> User Grants Summary
  </div>
  <div class="card-body">
    <div class="chart-container mx-auto" style="text-align: center; position: relative; width:60%">
        <canvas id="grant-summary-chart"></canvas>
    </div>
    <hr>
    <strong> Grants Total:</strong> ${{grant_total}} <br>
    <strong> Grants Total PI Only:</strong> ${{grant_total_pi_only}} <br>
    <strong> Grants Total CoPI Only:</strong> ${{grant_total_copi_only}} <br>
    <strong> Grants Total Senior Personnel Only:</strong> ${{grant_total_sp_only}}
  </div>
</div>
<!-- End Grants -->
{% endif %}

<!-- Start Allocation by Field of Science -->
<div class="card mb-3">
  <div class="card-header">
    <i class="fas fa-flask" aria-hidden="true"></i> Active Allocations and Users by Field of Science
  </div>
  <div id="allocation-by-fos" class="card-body" hx-get="/allocation-by-fos" hx-trigger="load">
    <div class="text-center">
      <button type="button" class="btn btn-primary"><i class="fas fa-sync fa-spin fa-fw" aria-hidden="true"></i> Getting Data <span
          class="visually-hidden">...</span></button>
    </div>
  </div>
</div>
<!-- End Allocation by Field of Science -->

<!-- Start Allocation Charts -->
<div class="card mb-3">
  <div class="card-header">
    <i class="fas fa-trophy"></i> Resources and Allocations Summary
  </div>
  <div class="card-body">
      <div class="row">
        <div class="col">
            <div class="chart-container mx-auto" style="text-align: center; position: relative; width:60%">
                <canvas id="allocation-summary-chart"></canvas>
            </div>
            <div class="chart-container mx-auto" style="text-align: center; position: relative; width:60%">
                <canvas id="resource-summary-chart"></canvas>
            </div>
        </div>
        <div id="allocation-summary" class="col" hx-get="/allocation-summary" hx-trigger="load">
            <div class="text-center">
              <button type="button" class="btn btn-primary"><i class="fas fa-sync fa-spin fa-fw" aria-hidden="true"></i> Getting Data <span
                  class="visually-hidden">...</span></button>
            </div>
        </div>
      </div>
  </div>
</div>
<!-- End Allocation Charts -->

{% endblock %}
